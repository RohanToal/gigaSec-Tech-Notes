[[MOC Networking]]

# VIM
Created:  [[2022-06-19]]
Tags: #fleeting 

---
Abstract:
[[Some random long read about VIM I found online]]

---
It's important to familiarize how to use vim first and actually be comfortable with it as a text editor. Then that's where you can slowly add plugins and you can safely sail the sea into the vast confusing world of NVIM plugins.


Command Mode
- Where you can run commands

Insert Mode
- Where you can type texts

Visual Mode
- Selection of texts so that you can only run commands on that selected text



In Command Mode
`u` undo last command
`U` to fix the whole line 


`K` to search for documentation to selected word


**Accidentally hit Ctrl+Z?**
It backgrounds the running process. Type 'fg' to bring it back to the foreground. This isn't actually a vim thing, it's a shell thing
https://news.ycombinator.com/item?id=3563629


In nvim
Base configuration is at `~/config/nvim/init.lua`


#### Append (a) 
Append will put cursor AFTER current position

`A`       Append at the end of the line

`o`       New line BELOW current cursor  

#### Insert
Insert will put cursor BEFORE current position

`I`       Insert at the beginning of the line

`O`       New line ABOVE current cursor 

## Selection
#### Select All
**ggVG**
`gg` jumps to beginning of file
`VG` selects from current cursor to end of document.

#### Navigation of selection
`#` navigate similar words of current word cursor is at
`$` go to end of the line

## Copying
`count <command>`

Copy two lines
2 yy


Copy two end of the line
y $

## Deletion
Deletion in VIM is actually CUT. 
#### Delete (x)
Delete char on current position
-> aasda dasd asd asdasd ad

#### Delete Word
(dw)
->  hsjdfhsdkf sdasdas

(de)


#### Delete line (shift+d) or (d$)
Delete from current position to end of line
These doesn't delete whitespaces

-> sdsdaasd asdas asdasd

 

#### Delete whole line (dd) 
It also deletes empty line



Many commands that change text 
are made from an OPERATOR and a MOTION 

d = delete OPERATOR
motion = commands that lets you move cursor

Format for modying texts
operator [number] motion

operator = the command itself, instructs what to do
[number] = optional argument that repeats the motion
motion = moves over the text


#### Motion -> commands that lets you move cursor
w = move cursor to the start of next word
e = move cursor at the last letter/end of the word
b = for backwards


#### Using count for motion 
count  motion
2w = to move two words foward
3e = to move cursor at end of the word three steps forward
0 = move start of the lien

#### Using count to delete more
d  count  motion
d3w

Delete two lines (current line to below)
2dd


#### Exiting Vim IGNORES changes 
`:q!`  or `ZZ`

#### Exiting Vim && SAVING CHANGES
`:wq`

Exiting Vim && SAVING ALL TABS
`:wqa`


## Saving a file with root permission
```
:w !sudo tee %
```

**:w** – Write a file

**!sudo** – Call shell with sudo command

**tee** – The output of write command redirected using tee

**% -** Indicate the Current filename. Here it is /etc/hosts



**vimgrep**
:grep  
To use grep and regex inside vim. 


As the doc say:
```
Vim has two ways to find matches for a pattern: Internal and external.
```

In a nutshell, `:vimgrep` uses Vim's grep mechanism to read and find in files. `:grep` uses an external commands to achieve the same job.

The `/` search is for the current buffer only, whereas `:[vim]grep` search through a pattern of files, allowing you to search in an entire project at once.

Have a look at `:h grep` for more information.

`/<word_to_search>`    search FORWADS for a pattern

`?<word_to_search>`   search BACKWARDS for a pattern

`n`               Search in same direction

`N`               Search in opposite direction


### Basic Find and Replace

In Vim, you can find and replace text using the `:substitute` (`:s`) command.
```vi
:[range]s/{pattern}/{string}/[flags] [count]
```

The command searches each line in `[range]` for a `{pattern}`, and replaces it with a `{string}`. `[count]` is a positive integer that multiplies the command.

For example, to search for the first occurrence of the string ‘foo’ in the current line and replace it with ‘bar’, you would use:
```vi
:s/foo/bar/
```

To replace all occurrences of the search pattern in the current line, add the `g` flag:
```vi
:s/foo/bar/g
```

To confirm each substitution, use the `c` flag:

```vi
:s/foo/bar/gc
```

```output
replace with bar (y/n/a/q/l/^E/^Y)?
```


You can also use [regular expressions](https://linuxize.com/post/regular-expressions-in-grep/) as a search pattern. The command bellow replaces all lines starting with ‘foo’ with ‘Vim is the best’:

```output
:%s/^foo.*/Vim is the best/gc
```

The `^` (caret) symbol matches the beginning of a line and `.*` matches any number of any characters.




### References
1. https://linuxize.com/post/vim-find-replace/